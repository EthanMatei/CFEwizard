<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	
<!-- All constants are defined in struts.properties -->
	
	<package name="cfe" extends="struts-default">
	
	    <interceptors>
			<interceptor-stack name="cfeStack">
				<interceptor-ref name="tokenSession">
					<param name="includeMethods">*</param>
				</interceptor-ref>
				<interceptor-ref name="defaultStack" />					
			</interceptor-stack>
			
			<interceptor-stack name="fileUploadStack">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="tokenSession">
					<param name="includeMethods">*</param>
				</interceptor-ref>
			    <!--    	
			    <interceptor-ref name="fileUpload">
	        		<param name="allowedTypes">application/msaccess</param>
	    		</interceptor-ref>
	    		-->
	    		
	    		<!-- JM - commented this out to get serial file upload version to work
			    <interceptor-ref name="execAndWait">
			        <param name="delay">1000</param>
			        <param name="delaySleepInterval">500</param>
			    </interceptor-ref>
			    -->
        	</interceptor-stack>
        	
        	
		</interceptors>
		
		<default-interceptor-ref name="cfeStack" />


    	<global-results>
     		<!-- <result name="error">pages/error.jsp</result> -->
     		<result name="invalid.token">pages/error.html</result>
		</global-results>

 		<global-exception-mappings>
  			<exception-mapping exception="java.lang.Exception" result="error" />
		</global-exception-mappings>

		
		<!-- 
		<action name="" class="cfe.action.Home">
            <result name="success">pages/home.jsp</result>
            <result name="error">pages/error.jsp</result>
        </action>
        
 		<action name="/" class="cfe.action.Home">
            <result name="success">pages/home.jsp</result>
            <result name="error">pages/error.jsp</result>
        </action>      
          
 		<action name="home" class="cfe.action.Home">
            <result name="success">pages/home.jsp</result>
            <result name="error">pages/error.jsp</result>
        </action>   
                
 		<action name="/home" class="cfe.action.Home">
            <result name="success">pages/home.jsp</result>
            <result name="error">pages/error.jsp</result>
        </action>   
               
 		<action name="*">
            <result name="success">pages/error.jsp</result>
            <result name="error">pages/error.jsp</result>
        </action>   
        -->
        	
		
		<action name="LoginAction" class="cfe.action.LoginAction">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/login.jsp</result>
			<result name="error">pages/login.jsp</result>
		</action>
		
		<action name="LoginProcess" class="cfe.action.LoginProcess">
			<interceptor-ref name="cfeStack"/>
			<result name="success" type="redirectAction">
                <param name="actionName">Home</param>
            </result>
            <result name="input">pages/login.jsp</result>
			<result name="error">pages/login.jsp</result>
		</action>

		<action name="LogoutAction" class="cfe.action.LogoutAction">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/login.jsp</result>
			<result name="error">pages/login.jsp</result>
		</action>
				
		<action name="Home" class="cfe.action.Home">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/home.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!-- DISCOVERY ======================================================= -->
		
		<action name="DiscoveryDbUpload" class="cfe.action.DiscoveryAction" method="initialize">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/discovery_cohort/discoveryDatabaseUpload.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="input">pages/discovery_cohort/discoveryDatabaseUpload.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!--  Upload specified database, and parse it to get values for cohort specification -->
		<action name="DiscoveryCohortSpecification" class="cfe.action.DiscoveryAction" method="uploadDatabase">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/discovery_cohort/discoveryCohortSpecification.jsp</result>
			<result name="error">pages/discovery_cohort/discoveryDatabaseUpload.jsp</result>
			<result name="input">pages/discovery_cohort/discoveryDatabaseUpload.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<action name="DiscoveryCohort" class="cfe.action.DiscoveryAction" method="cohortSpecification">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/discovery_cohort/discoveryCohort.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="input">pages/discovery_cohort/discoveryCohort.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

       <!-- ======================================== -->		

		<action name="DiscoveryCohortSelection" class="cfe.action.DiscoveryAction" method="cohortSelection">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/discovery/discoveryCohortSelection.jsp</result>
			<result name="error">pages/discovery/discoveryCohortSelection.jsp</result>	
			<result name="input">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

		<action name="DiscoveryScoringSpecification" class="cfe.action.DiscoveryAction" method="discoveryScoringSpecification">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/discovery/discoveryScoringSpecification.jsp</result>
			<result name="error" type="redirectAction">
			    <param name="actionName">DiscoveryCohortSelection</param>	
			    <param name="errorMessage">${errorMessage}</param>
			</result>
			<result name="input">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
						
		<!--  Upload specified CSV file, upload probeset to Genecards symbol mapping DB,
		      get Diagnostic input, and calculate values -->
		<action name="DiscoveryCalculate" class="cfe.action.DiscoveryAction" method="calculate">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/discovery/discoveryResult.jsp</result>
			<result name="input" type="redirectAction">
			    <param name="actionName">DiscoveryScoringSpecification</param>	
			    <param name="discoveryId">${discoveryId}</param>	
			    <param name="errorMessage">${errorMessage}</param>
			</result>
	        <result name="error">pages/discovery/discoveryResult.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
								
						
	    <!-- ================================================================== -->
	    
				
		<action name="DatabaseStatusAction" class="cfe.action.DatabaseStatusAction">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/dbStatus.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<action name="DatabaseClear" class="cfe.action.DatabaseStatusAction" method="clear">
			<interceptor-ref name="basicStack"/>
			<result name="success" type="redirectAction">
			    <param name="actionName">DatabaseStatusAction</param>
            </result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<action name="SystemStatusAction" class="cfe.action.SystemStatusAction">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/systemStatus.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		
    <!-- PRIORITIZATION ===================================================================== -->
    
	<!-- Upload database flow -->
	
		<!-- Step 1 -->
		<action name="PrioritizationDBSelectionInitialize" class="cfe.action.prioritization.DBSelection" method="initialize">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/prioritization/dbSelection.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

        <!-- Step 2 -->		
		<action name="PrioritizationDBSelection" class="cfe.action.prioritization.DBSelection">
			<result name="success">pages/prioritization/fileUpload.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="input">pages/prioritization/dbSelection.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!-- Step 3 -->
		<action name="PrioritizationFileUpload" class="cfe.action.prioritization.FileUploadSerial">
			<interceptor-ref name="fileUploadStack"/>
	    	<result name="success">pages/prioritization/dbUploadStatus.jsp</result>
	    	<!-- <result name="error">pages/error.jsp</result> -->
	        <result name="error">pages/prioritization/dbUploadStatus.jsp</result>
	    	<result name="input">pages/prioritization/fileUpload.jsp</result>
	    	<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>   	
		</action>
		
		<!-- SCORES CALCULATION -->
	
		<!-- Step 1 -->	
		
		<!-- does not work with pages namespace -->
	    <action name="PrioritizationGeneListUpload" class="cfe.action.prioritization.GeneListUpload" method="initialize">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/prioritization/geneListUpload.jsp</result>
			<result name="error">pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result> 
		</action>

		<action name="PrioritizationAllGenesProcess"
		        class="cfe.action.prioritization.GeneListUpload"
		        method="processAllGenes">
		    <interceptor-ref name="basicStack"/>
			<result name="success" type="redirectAction">
            	<param name="actionName">PrioritizationScoringWeights</param>
            </result>
            <result name="input" type="redirectAction">
                <param name="actionName">PrioritizationGeneListUpload</param>
			    <param name="errorMessage">${errorMessage}</param>
            </result>
			<result name="error">pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result> 			
		</action>
		
		<action name="PrioritizationGeneListUploadProcess" class="cfe.action.prioritization.GeneListUpload">
		    <interceptor-ref name="cfeStack"/>
			<result name="success" type="redirectAction">
            	<param name="actionName">PrioritizationScoringWeights</param>
            </result>
            <result name="input" type="redirectAction">
                <param name="actionName">PrioritizationGeneListUpload</param>
			    <param name="errorMessage">${errorMessage}</param>
            </result>
			<result name="error">pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result> 			
		</action>

		<action name="PrioritizationDiscoveryGeneListProcess"
		        class="cfe.action.prioritization.GeneListUpload"
		        method="processDiscoveryResults">
		    <interceptor-ref name="basicStack"/>
			<result name="success" type="redirectAction">
            	<param name="actionName">PrioritizationScoringWeights</param>
            	<param name="discoveryId">${discoveryId}</param>
            	<param name="discoveryScoreCutoff">${discoveryScoreCutoff}</param>
            	<param name="geneListFileName">${geneListFileName}</param>
            </result>
            <result name="input" type="redirectAction">
                <param name="actionName">PrioritizationGeneListUpload</param>
			    <param name="errorMessage">${errorMessage}</param>
            </result>
			<result name="error">pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result> 			
		</action>
		
		<!-- Step 2 -->	
		<action name="PrioritizationScoringWeights" class="cfe.action.prioritization.ScoringWeights" method="initialize">
			<interceptor-ref name="basicStack"/>
			<result name="success">pages/prioritization/scoringWeights.jsp</result>	
			<result name="error">pages/error.jsp</result>   
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<action name="PrioritizationScoringWeightsProcess" class="cfe.action.prioritization.ScoringWeights">
			<interceptor-ref name="cfeStack"/>
			<result name="success" type="redirectAction">
                <param name="actionName">PrioritizationDiseaseSelection</param>
                <param name="discoveryId">${discoveryId}</param>
            	<param name="discoveryScoreCutoff">${discoveryScoreCutoff}</param>
            	<param name="geneListFileName">${geneListFileName}</param>
            </result>
			<result name="error">pages/error.jsp</result>
			<result name="input">pages/prioritization/scoringWeights.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>			    
		</action>

		<!--  Step 3 -->
		<action name="PrioritizationDiseaseSelection" class="cfe.action.prioritization.DiseaseSelectionAction" method="initialize">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/prioritization/diseaseSelection.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

		<action name="PrioritizationDiseaseSelectionProcess" class="cfe.action.prioritization.DiseaseSelectionAction" method="execute">
			<interceptor-ref name="cfeStack"/>
			<result name="success" type="redirectAction">
                <param name="actionName">PrioritizationCalculateScores</param>
                <param name="discoveryId">${discoveryId}</param>
            	<param name="discoveryScoreCutoff">${discoveryScoreCutoff}</param>
            	<param name="geneListFileName">${geneListFileName}</param>
            </result>
            <result name="input" type="redirectAction">
                <param name="actionName">PrioritizationDiseaseSelection</param>
			    <param name="errorMessage">${errorMessage}</param>
            </result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!--  For processing of import of diseases (an alternative to selecting them manually) -->
	    <action name="PrioritizationDiseasesImport" class="cfe.action.prioritization.DiseaseSelectionAction" method="importDiseases">
			<interceptor-ref name="cfeStack"/>
			<result name="success" type="redirectAction">
                <param name="actionName">PrioritizationCalculateScores</param>
                <param name="discoveryId">${discoveryId}</param>
            	<param name="discoveryScoreCutoff">${discoveryScoreCutoff}</param>
            	<param name="geneListFileName">${geneListFileName}</param>
            </result>
            <result name="input" type="redirectAction">
                <param name="actionName">PrioritizationDiseaseSelection</param>
			    <param name="errorMessage">${errorMessage}</param>
            </result>
			<result name="error">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!--  Step 4 -->
		<action name="PrioritizationCalculateScores" class="cfe.action.prioritization.CalculateScores">
				<interceptor-ref name="basicStack"/>
			    <result name="success">pages/prioritization/calculatedScores.jsp</result>
			    <result name="error">pages/error.jsp</result>
			    <result name="login" type="redirectAction">
                    <param name="actionName">LoginAction</param>
                </result>
		</action>
		
		<!--  Step 5 -->
		<action name="PrioritizationReport" class="cfe.action.prioritization.ReportAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		
        <!-- ==================================================================================== -->
 
        <!-- ========================== -->
        <!-- VALIDATION COHORT CREATION -->
        <!-- ========================== -->
        
		<!-- merge discovery and prioritization results -->
		<action name="ValidationDataMergeSelection"
		        class="cfe.action.ValidationDataMergeAction"
		        method="mergeDataSelection">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/validation/validationDataMerge.jsp</result>
			<result name="error">pages/error.jsp</result>	
		    <result name="input" type="redirectAction">
			    <param name="actionName">ValidationDataMergeSelection</param>	
			    <param name="errorMessage">${errorMessage}</param>
			</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
 
		<action name="ValidationDataMerge"
		        class="cfe.action.ValidationDataMergeAction"
		        method="mergeData">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/validation/validationDataMergeResult.jsp</result>
			<result name="error">pages/error.jsp</result>	
			<result name="input">pages/validation/validationDataMerge.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<action name="ValidationCohortDataSelection"
		        class="cfe.action.ValidationCohortAction"
		        method="initialize">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/validation_cohort/validationCohortDiscoveryCohortSelection.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>

        
		<action name="ValidationCohortSpecification"
		        class="cfe.action.ValidationCohortAction"
		        method="specification">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/validation_cohort/validationCohortSpecification.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
        
                   
		<action name="ValidationCohortProcess"
		        class="cfe.action.ValidationCohortAction"
		        method="process">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/validation_cohort/validationCohort.jsp</result>
		    <result name="error">pages/validation_cohort/validationCohort.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
        
		
     
        <!-- ==================================================================================== -->
 
        <!-- Clinical (Validation) and Testing Cohort Creation -->
        <!-- 
		<action name="ClinicalAndTestingCohortsDiscoveryCohortSelection"
		        class="cfe.action.ClinicalAndTestingCohortsAction"
		        method="initialize">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/cohort/clinicalAndTestingCohortsDiscoveryCohortSelection.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
        
		<action name="ClinicalAndTestingCohortsSpecification"
		        class="cfe.action.ClinicalAndTestingCohortsAction"
		        method="specification">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/cohort/clinicalAndTestingCohortsSpecification.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
           
		<action name="ClinicalAndTestingCohortsProcess"
		        class="cfe.action.ClinicalAndTestingCohortsAction"
		        method="process">
			<interceptor-ref name="fileUploadStack"/>
		    <result name="success">pages/cohort/clinicalAndTestingCohorts.jsp</result>
		    <result name="error">pages/cohort/clinicalAndTestingCohorts.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
        -->
        
        <!-- ==================================================================================== -->

        <!-- ================== -->
        <!-- VALIDATION SCORING -->
        <!-- ================== -->

			 
        <!-- select validation cohort -->
		<action name="ValidationDataSelection" class="cfe.action.ValidationScoringAction" method="validationDataSelection">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/validation/validationDataSelection.jsp</result>
			<result name="error">pages/validation/validationDataSelection.jsp</result>	
			<result name="input">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

		<action name="ValidationScoringSpecification" class="cfe.action.ValidationScoringAction" method="validationScoringSpecification">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/validation/validationScoringSpecification.jsp</result>
			<result name="error">pages/validation/validationScoringSpecification.jsp</result>	
			<result name="input" type="redirectAction">
			    <param name="actionName">ValidationDataSelection</param>
			    <param name="errorMessage">${errorMessage}</param>
			</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>       
		
 
		<action name="ValidationScoresCalculation" class="cfe.action.ValidationScoringAction" method="calculateValidationScores">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/validation/validationScores.jsp</result>
			<result name="error">pages/validation/validationScores.jsp</result>	
			<result name="input" type="redirectAction">
			    <param name="actionName">ValidationScoringSpecification</param>
			    <param name="errorMessage">${errorMessage}</param>
			</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
        <!-- ==================================================================================== -->
 
        <!-- ======================= -->
        <!-- TESTING COHORT CREATION -->
        <!-- ======================= -->
        
		<action name="TestingCohortsDataSelection"
		        class="cfe.action.TestingCohortsAction"
		        method="initialize">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/testing_cohort/testingCohortsValidationCohortSelection.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>


		<action name="TestingCohortsSpecification"
		        class="cfe.action.TestingCohortsAction"
		        method="specification">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/testing_cohort/testingCohortsSpecification.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
                  
		<action name="TestingCohortsProcess"
		        class="cfe.action.TestingCohortsAction"
		        method="process">
			<interceptor-ref name="fileUploadStack"/>
		    <result name="success">pages/testing_cohort/testingCohorts.jsp</result>
		    <result name="error">pages/testing_cohort/testingCohorts.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>

   	
        <!-- ==================================================================================== -->
        
        <!-- =============== -->
        <!-- Testing Scoring -->
        <!-- =============== -->

		<action name="TestingDataSelection" class="cfe.action.TestingScoringAction" method="selectTestingData">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/testing/testingDataSelection.jsp</result>
			<result name="error">pages/testing/testingDataSelection.jsp</result>	
			<result name="input">pages/error.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>


		<action name="TestingScoringSpecification" class="cfe.action.TestingScoringAction" method="specifyTestingScoringOptions">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/testing/testingScoringSpecification.jsp</result>
			<result name="error">pages/testing/testingDataSelection.jsp</result>	

			<result name="input" type="redirectAction">
			    <param name="actionName">TestingDataSelection</param>
			    <param name="errorMessage">${errorMessage}</param>
			</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<action name="TestingScoringCalculation" class="cfe.action.TestingScoringAction" method="calculateTestingScores">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/testing/testingScores.jsp</result>
			<result name="error">pages/testing/testingScores.jsp</result>	
			<result name="input">pages/testing/testingScoringSpecification.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

        <!-- ==================================================================================== -->
         
        <!-- =================== -->
        <!-- Batch Processing    -->
        <!-- =================== -->
		
		<action name="BatchInitialization" class="cfe.action.BatchAction" method="initialize">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/batch/dataUpload.jsp</result>
			<result name="error">pages/error.jsp</result>
			<result name="input">pages/batch/dataUpload.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!--  Upload data and process it -->
		<action name="BatchDataUpload" class="cfe.action.BatchAction" method="uploadData">
		    <interceptor-ref name="fileUploadStack"/>
	        <result name="success">pages/batch/dataInput.jsp</result>
			<result name="error">pages/batch/dataInput.jsp</result>
			<result name="input">pages/batch/dataInput.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>  
		
				
		<!--  Calculate -->
		<action name="BatchCalculate" class="cfe.action.BatchAction" method="calculate">
		    <interceptor-ref name="basicStack"/>
	        <result name="success">pages/batch/batchResult.jsp</result>
			<result name="error">pages/batch/batchResult.jsp</result>
			<result name="input">pages/batch/batchResult.jsp</result>
			<result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>  
		                        						        
        <!-- ==================================================================================== -->
        
        <!-- =================== -->
        <!-- CFE Results Display -->
        <!-- =================== -->
                        
        <!-- CFE Results -->
		<action name="CfeResults" class="cfe.action.CfeResultsAction">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/cfeResults.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
        
        <!-- CFE Results Detail -->
		<action name="CfeResultsDetailAction" class="cfe.action.CfeResultsDetailAction">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/cfeResultsDetail.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
               
        <!-- Delete CFE Results -->
		<action name="CfeResultsDelete" class="cfe.action.CfeResultsDeleteAction">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/cfeResults.jsp</result>
		    <result name="error">/pages/error.jsp</result>
		    <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
        </action>
        
        <!-- ==================================================================================== -->        		        
        
        <!-- CSV file display -->
		<action name="CsvDisplay" class="cfe.action.CsvDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>	
		
        <!-- Text file display -->
		<action name="TextFileDisplay" class="cfe.action.TextFileDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>	
        
        <!-- CSV text file display - a more efficient CSV file display action that works well for large files -->
		<action name="CsvTextFileDisplay" class="cfe.action.CsvTextFileDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
						
        <!-- XLSX (spreadsheet) file display -->
		<action name="XlsxDisplay" class="cfe.action.XlsxDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!-- CFE Results XLSX (spreadsheet) file display -->
		<action name="CfeResultsXlsxDisplay" class="cfe.action.CfeResultsXlsxDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

		<!-- CFE Results Files XLSX (spreadsheet) display -->
		<action name="CfeResultsFilesXlsxDisplay" class="cfe.action.CfeResultsFilesXlsxDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
				
		<!-- CFE Results file display -->
		<action name="CfeResultsFileDisplay" class="cfe.action.CfeResultsFileDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
				
		<!-- Discovery Results XLSX (spreadsheet) file display -->
		<action name="CfeResultsDiscoveryRScriptLogDisplay" class="cfe.action.CfeResultsDiscoveryRScriptLogDisplayAction" method="view">
			<interceptor-ref name="basicStack"/>
		    <result name="success" type="stream">
                <param name="inputName">fileStream</param>
	            <param name="contentType">${fileContentType}</param>
                <param name="contentDisposition">attachment; filename="${fileName}"</param>
            </result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>

		<!-- Admin Test Page -->
		<action name="TestAction" class="cfe.action.TestAction" method="initialize">
			<interceptor-ref name="basicStack"/>
            <result name="success">pages/test.jsp</result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
		
		<!-- Admin Test Page -->
		<action name="TestProcessAction" class="cfe.action.TestAction" method="process">
			<interceptor-ref name="basicStack"/>
            <result name="success">pages/testResults.jsp</result>
            <result name="error">pages/error.jsp</result>
            <result name="login" type="redirectAction">
                <param name="actionName">LoginAction</param>
            </result>
		</action>
						
	    <!-- Error Action -->
		<action name="ErrorAction" class="cfe.action.ErrorAction">
			<interceptor-ref name="basicStack"/>
		    <result name="success">pages/error.jsp</result>
		</action>					
	</package>
</struts>

<!-- 
application/vnd.ms-excel 
application/msaccess 
text/plain 
application/pdf
application/vnd.openxmlformats *.docx
-->